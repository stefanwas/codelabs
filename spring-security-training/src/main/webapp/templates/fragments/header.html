<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<body>
    <div th:fragment="header">
        <div th:if="${principal}">
            <h3> You are logged in as: [<span th:text="${principal}" />] Roles: <span th:text="${roles}" /></h3>
            <form id="logout" action="#" th:action="@{/logout}" method="POST"></form>
            <a href="javascript:document.getElementById('logout').submit()">Logout</a>
        </div>
        <div th:if="!${principal}">
            <h3>You are not logged in.</h3>
            <a th:href="@{/login}">Login</a>
        </div >

        <hr/>

        <div sec:authorize="isAuthenticated()">
            This content is only shown to authenticated users.
        </div>
        <div sec:authorize="hasRole('ROLE_ADMIN')">
            This content is only shown to administrators.
        </div>
        <div sec:authorize="hasRole('ROLE_USER')">
            This content is only shown to users.
        </div>

        <hr/>

        Logged user: <b><span sec:authentication="name" /></b>
        <br/>
        User roles: <b><span sec:authentication="principal.authorities" /></b>

        <hr/>
        <hr/>
    </div>
</body>
</html>